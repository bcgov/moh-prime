<app-adjudication-container [content]="content">

  <app-page-header>Notes</app-page-header>

</app-adjudication-container>

<ng-template #content>

  <form (ngSubmit)="onSubmit()"
        [formGroup]="form"
        novalidate>

    <div class="row mb-4">
      <div class="col-sm-12 col-lg-9 col-xl-5 pb-4">

        <mat-form-field class="w-100">
          <textarea matInput
                    placeholder="Write Note Here"
                    rows="10"
                    formControlName="note"></textarea>
          <mat-error>Required</mat-error>
        </mat-form-field>

        <div class="text-right">
          <button mat-flat-button
                  color="primary"
                  [disabled]="!canEdit && !note.value?.length">Save Note</button>
        </div>

      </div>
      <div class="col-sm-12 col-lg-9 col-xl-7">

        <h2>Notes List</h2>

        <ng-container *ngIf="adjudicatorNotes.value?.length; else noNotes">

          <div class="table-responsive">
            <table class="table">
              <tbody>
                <tr *ngFor="let adjudicatorNote of adjudicatorNotes | async">
                  <th class="text-right">
                    <div class="text-nowrap">
                      {{ adjudicatorNote.noteDate | formatDate }}
                    </div>
                    <small class="text-mute font-weight-normal">
                    {{ adjudicatorNote.noteDate | formatDate: 'h:mm a' }}
                  </small>
                  </th>
                  <td>{{ adjudicatorNote.note }}</td>
                </tr>
              </tbody>
            </table>
          </div>

        </ng-container>

        <ng-template #noNotes>
          No notes have been created
        </ng-template>

      </div>
    </div>

  </form>

</ng-template>
