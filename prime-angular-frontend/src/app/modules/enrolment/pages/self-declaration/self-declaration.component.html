<app-busy-overlay [busy]="busy">

  <form (ngSubmit)="onSubmit()"
        [formGroup]="form"
        novalidate>

    <app-page-header>Application Enrolment</app-page-header>

    <app-page-subheader>
      <ng-container appPageSubheaderTitle>Self Declaration</ng-container>
      <ng-container appPageSubheaderSummary>
        Self declaration information is collected under the authority of the Information Management Regulation of the
        Pharmaceutical Services Act and confidentiality is protected under the Freedom of Information and Protection of
        Privacy Act. Self declaration information is used to verify the applicant is in good standing with their
        respective college and to determine PharmaNet access eligibility.
      </ng-container>
    </app-page-subheader>

    <ng-container *ngIf="error">
      <app-alert type="danger"
                 icon="error_outline">
        <ng-container #alertContent
                      class="alert-content">
          Each self declaration question must be answered before continuing with enrolment!
        </ng-container>
      </app-alert>
    </ng-container>

    <p>Have you ever been the subject of an order or a conviction for an information contravention?</p>

    <mat-radio-group aria-labelledby="example-radio-group-label"
                     class="example-radio-group"
                     formControlName="hasConviction">
      <mat-radio-button class="mr-4"
                        *ngFor="let decision of decisions"
                        [value]="decision.code">
        {{ decision.name }}
      </mat-radio-button>
    </mat-radio-group>

    <div class="row mb-3"
         *ngIf="hasConviction.value">
      <div class="col-sm-12 col-md-6 col-xl-4">

        <mat-form-field class="w-100">
          <textarea matInput
                    placeholder="Please provide details"
                    rows="5"
                    #hasConvictionInput
                    formControlName="hasConvictionDetails"
                    [required]="isRequired('hasConvictionDetails')"></textarea>
          <mat-error *ngIf="hasConvictionDetails.hasError('required')">Required</mat-error>
        </mat-form-field>

      </div>
    </div>

    <p>Have you ever had your registration with a governing body of a health profession suspended or cancelled?</p>

    <mat-radio-group aria-labelledby="example-radio-group-label"
                     class="example-radio-group"
                     formControlName="hasRegistrationSuspended">
      <mat-radio-button class="mr-4"
                        *ngFor="let decision of decisions"
                        [value]="decision.code">
        {{ decision.name }}
      </mat-radio-button>
    </mat-radio-group>

    <div class="row mb-3"
         *ngIf="hasRegistrationSuspended.value">
      <div class="col-sm-12 col-md-6 col-xl-4">

        <mat-form-field class="w-100">
          <textarea matInput
                    placeholder="Please provide details"
                    rows="5"
                    #hasRegistrationSuspended
                    formControlName="hasRegistrationSuspendedDetails"
                    [required]="isRequired('hasRegistrationSuspendedDetails')"></textarea>
          <mat-error *ngIf="hasRegistrationSuspendedDetails.hasError('required')">Required</mat-error>
        </mat-form-field>

      </div>
    </div>

    <p>
      Have you ever had Terms and Conditions imposed on your license as a result of disciplinary actions taken by a
      governing body?
    </p>

    <mat-radio-group aria-labelledby="example-radio-group-label"
                     class="example-radio-group"
                     formControlName="hasDisciplinaryAction">
      <mat-radio-button class="mr-4"
                        *ngFor="let decision of decisions"
                        [value]="decision.code">
        {{ decision.name }}
      </mat-radio-button>
    </mat-radio-group>

    <div class="row mb-3"
         *ngIf="hasDisciplinaryAction.value">
      <div class="col-sm-12 col-md-6 col-xl-4">

        <mat-form-field class="w-100">
          <textarea matInput
                    placeholder="Please provide details"
                    rows="5"
                    #hasDisciplinaryAction
                    formControlName="hasDisciplinaryActionDetails"
                    [required]="isRequired('hasDisciplinaryActionDetails')"></textarea>
          <mat-error *ngIf="hasDisciplinaryActionDetails.hasError('required')">Required</mat-error>
        </mat-form-field>

      </div>
    </div>

    <p>Have you ever had your access to PharmaNet suspended or revoked?</p>

    <mat-radio-group aria-labelledby="example-radio-group-label"
                     class="example-radio-group"
                     formControlName="hasPharmaNetSuspended">
      <mat-radio-button class="mr-4"
                        *ngFor="let decision of decisions"
                        [value]="decision.code">
        {{ decision.name }}
      </mat-radio-button>
    </mat-radio-group>

    <div class="row mb-3"
         *ngIf="hasPharmaNetSuspended.value">
      <div class="col-sm-12 col-md-6 col-xl-4">

        <mat-form-field class="w-100">
          <textarea matInput
                    placeholder="Please provide details"
                    rows="5"
                    #hasPharmaNetSuspended
                    formControlName="hasPharmaNetSuspendedDetails"
                    [required]="isRequired('hasPharmaNetSuspendedDetails')"></textarea>
          <mat-error *ngIf="hasPharmaNetSuspendedDetails.hasError('required')">Required</mat-error>
        </mat-form-field>

      </div>
    </div>

    <div class="row justify-content-between">
      <div class="col pt-4">

        <button mat-stroked-button
                type="button"
                (click)="onBack()">Back</button>

      </div>
      <div class="col pt-4 text-right">

        <button mat-raised-button
                color="primary">Save and Continue</button>

      </div>
    </div>

  </form>

</app-busy-overlay>
