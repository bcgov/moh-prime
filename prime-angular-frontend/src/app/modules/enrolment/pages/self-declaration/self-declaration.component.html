<app-busy-overlay [busy]="busy">

  <form (ngSubmit)="onSubmit()"
        [formGroup]="form"
        novalidate>

    <app-page-header>Application Enrolment</app-page-header>

    <app-page-subheader>
      <ng-container appPageSubheaderTitle>Self Declaration</ng-container>
      <ng-container appPageSubheaderSummary>
        Lorem ipsum dolor, sit amet consectetur adipisicing elit.
      </ng-container>
    </app-page-subheader>

    <p>Have you ever been the subject of an order or a conviction for an information contravention?</p>

    <mat-radio-group aria-labelledby="example-radio-group-label"
                     class="example-radio-group"
                     formControlName="hasConviction">
      <mat-radio-button class="mr-4"
                        *ngFor="let decision of decisions"
                        [value]="decision.code">
        {{ decision.name }}
      </mat-radio-button>
    </mat-radio-group>

    <div class="row mb-3"
         *ngIf="hasConviction.value">
      <div class="col-sm-12 col-md-6 col-xl-4">

        <mat-form-field class="w-100"
                        hintLabel="Max 200 Characters">
          <textarea matInput
                    placeholder="Please provide details"
                    rows="5"
                    maxlength="200"
                    #hasConvictionInput
                    formControlName="hasConvictionDetails"
                    [required]="isRequired('hasConvictionDetails')"></textarea>
          <mat-hint align="end">{{ hasConvictionDetails.value?.length || 0 }}/200</mat-hint>
          <mat-error *ngIf="hasConvictionDetails.hasError('required')">Required</mat-error>
        </mat-form-field>

      </div>
    </div>

    <p>Have you ever had your registration with a governing body of a health profession suspended or cancelled?</p>

    <mat-radio-group aria-labelledby="example-radio-group-label"
                     class="example-radio-group"
                     formControlName="hasRegistrationSuspended">
      <mat-radio-button class="mr-4"
                        *ngFor="let decision of decisions"
                        [value]="decision.code">
        {{ decision.name }}
      </mat-radio-button>
    </mat-radio-group>

    <div class="row mb-3"
         *ngIf="hasRegistrationSuspended.value">
      <div class="col-sm-12 col-md-6 col-xl-4">

        <mat-form-field class="w-100"
                        hintLabel="Max 200 Characters">
          <textarea matInput
                    placeholder="Please provide details"
                    rows="5"
                    maxlength="200"
                    #hasRegistrationSuspended
                    formControlName="hasRegistrationSuspendedDetails"
                    [required]="isRequired('hasRegistrationSuspendedDetails')"></textarea>
          <mat-hint align="end">{{ hasRegistrationSuspendedDetails.value?.length || 0 }}/200</mat-hint>
          <mat-error *ngIf="hasRegistrationSuspendedDetails.hasError('required')">Required</mat-error>
        </mat-form-field>

      </div>
    </div>

    <p>Have you ever had Terms and Conditions imposed on your licence as a result of disciplinary actions taken by a
      governing body?</p>

    <mat-radio-group aria-labelledby="example-radio-group-label"
                     class="example-radio-group"
                     formControlName="hasDisciplinaryAction">
      <mat-radio-button class="mr-4"
                        *ngFor="let decision of decisions"
                        [value]="decision.code">
        {{ decision.name }}
      </mat-radio-button>
    </mat-radio-group>

    <div class="row mb-3"
         *ngIf="hasDisciplinaryAction.value">
      <div class="col-sm-12 col-md-6 col-xl-4">

        <mat-form-field class="w-100"
                        hintLabel="Max 200 Characters">
          <textarea matInput
                    placeholder="Please provide details"
                    rows="5"
                    maxlength="200"
                    #hasDisciplinaryAction
                    formControlName="hasDisciplinaryActionDetails"
                    [required]="isRequired('hasDisciplinaryActionDetails')"></textarea>
          <mat-hint align="end">{{ hasDisciplinaryActionDetails.value?.length || 0 }}/200</mat-hint>
          <mat-error *ngIf="hasDisciplinaryActionDetails.hasError('required')">Required</mat-error>
        </mat-form-field>

      </div>
    </div>

    <p>Have you ever had your access to PharmaNet suspended or revoked?</p>

    <mat-radio-group aria-labelledby="example-radio-group-label"
                     class="example-radio-group"
                     formControlName="hasPharmaNetSuspended">
      <mat-radio-button class="mr-4"
                        *ngFor="let decision of decisions"
                        [value]="decision.code">
        {{ decision.name }}
      </mat-radio-button>
    </mat-radio-group>

    <div class="row mb-3"
         *ngIf="hasPharmaNetSuspended.value">
      <div class="col-sm-12 col-md-6 col-xl-4">

        <mat-form-field class="w-100"
                        hintLabel="Max 200 Characters">
          <textarea matInput
                    placeholder="Please provide details"
                    rows="5"
                    maxlength="200"
                    #hasPharmaNetSuspended
                    formControlName="hasPharmaNetSuspendedDetails"
                    [required]="isRequired('hasPharmaNetSuspendedDetails')"></textarea>
          <mat-hint align="end">{{ hasPharmaNetSuspendedDetails.value?.length || 0 }}/200</mat-hint>
          <mat-error *ngIf="hasPharmaNetSuspendedDetails.hasError('required')">Required</mat-error>
        </mat-form-field>

      </div>
    </div>

    <div class="row justify-content-between">
      <div class="col pt-4">

      <button mat-stroked-button
              type="button"
              (click)="onBack()">Back</button>

      </div>
      <div class="col pt-4 text-right">

        <button mat-raised-button
                color="primary">Save and Continue</button>

      </div>
    </div>

  </form>

</app-busy-overlay>
