<app-page [busy]="busy">

  <app-collection-notice-alert></app-collection-notice-alert>

  <app-page-header>Terms Of Access</app-page-header>

  <app-progress-indicator *ngIf="isInitialEnrolment"
                          [currentRoute]="EnrolmentRoutes.TERMS_OF_ACCESS"></app-progress-indicator>

  <ng-container *ngIf="currentPage > 0; else preamble">

    <!-- <app-access-terms-pager [accessTerm]="accessTerm"
                            [currentPage]="currentPage"
                            (changed)="onPageChange($event)"></app-access-terms-pager> -->
    <app-access-term [accessTerms]="accessTerm"></app-access-term>

    <!-- <app-ru-access-terms *ngIf="isRu"
                         [accessTerms]="accessTerm"></app-ru-access-terms>
    <app-obo-access-terms *ngIf="isObo"
                          [accessTerms]="accessTerm"></app-obo-access-terms> -->

  </ng-container>

  <ng-template #preamble>

    <div class="mb-4">
      <app-alert type="success"
                 icon="check_circle_outline">
        <ng-container #alertTitle
                      class="alert-title">
          You've Been Approved
        </ng-container>
        <ng-container #alertContent
                      class="alert-content">
          Youâ€™ve been approved for PharmaNet access for direct patient care.
        </ng-container>
      </app-alert>
    </div>

    <ng-container *ngIf="isAutomatic">

      <p>
        Your application can be automatically processed. Within a few minutes you should receive approval to access
        PharmaNet once you accept the PharmaNet Terms of Access Agreement. Please read the agreement carefully before
        accepting.
      </p>

      <p>
        After you accept the Terms of Access Agreement, you will receive your PharmaNet ID. Give this ID to the person
        or organization responsible for setting up your PharmaNet access account. This ID must be associated with
        your transactions on any PharmaNet access.
      </p>

    </ng-container>

    <p>
      To complete your enrolment, you must accept the PharmaNet User Terms of Access. These terms are specific to the
      type of access you have been granted.
    </p>

    <p>
      Please read the PharmaNet User Terms of Access carefully, as you must comply with them at all times in relation to
      your use PharmaNet. You are encouraged to print or save a copy of the PharmaNet User Terms of Access.
    </p>

  </ng-template>

  <div *ngIf="hasReadAgreement"
       class="footer my-3">
    <mat-checkbox class="mr-4"
                  [formControl]="agreed">
      I have read and accept the PharmaNet User Terms of Access.
    </mat-checkbox>
  </div>

  <div class="row justify-content-between pt-2">
    <div class="col-4">

      <button *ngIf="currentPage"
              mat-stroked-button
              (click)="onPrevPage()">
        Back
      </button>

    </div>
    <div class="col-8 text-right">

      <ng-container *ngIf="hasReadAgreement; else hasMorePages">

        <button mat-flat-button
                color="primary"
                class="mb-2"
                [ngClass]="(!isMobile) ? 'mr-2' : 'w-100'"
                [disabled]="!hasAgreed"
                (click)="onSubmit(true)">
          Accept Agreement
        </button>

        <button mat-flat-button
                color="warn"
                class="mb-2"
                [ngClass]="(!isMobile) ? 'mr-2' : 'w-100'"
                [disabled]="!hasAgreed"
                (click)="onSubmit()">
          Decline Agreement
        </button>

      </ng-container>

      <ng-template #hasMorePages>

        <button mat-flat-button
                color="primary"
                (click)="onNextPage()">
          Continue
        </button>

      </ng-template>

    </div>
  </div>

</app-page>
