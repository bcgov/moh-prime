<app-busy-overlay [busy]="busy">

  <div class="row">
    <div class="col-sm-12 col-lg-8 offset-lg-1 col-xl-5">

      <form (ngSubmit)="onSubmit()"
            [formGroup]="form"
            novalidate>

        <app-page-header>PharmaNet Enrolment</app-page-header>

        <app-page-subheader>
          <ng-container appPageSubheaderTitle>Job Information</ng-container>
          <ng-container appPageSubheaderSummary>
            If you have provided a Device Number you do not have to provide a job title unless you are going to be
            accessing PharmaNet in a different position.
          </ng-container>
        </app-page-subheader>

        <div class="row">
          <div class="col py-3"
               formArrayName="jobs">

            <ng-container *ngFor="let job of jobs.controls; let i = index"
                          [formGroupName]="i">

              <app-job-form [form]="job"
                            [index]="i"
                            [total]="jobs.controls.length"
                            [jobNames]="filteredJobNames"
                            [allowDefaultOption]="allowDefaultOption"
                            [defaultOptionLabel]="defaultOptionLabel"
                            (remove)="removeJob($event)"></app-job-form>

            </ng-container>

            <button mat-button
                    type="button"
                    color="primary"
                    (click)="addJob()">
              <mat-icon class="add-icon">add</mat-icon>
              Add Additional Job Title
            </button>

          </div>
        </div>

        <app-page-footer [profileCompleted]="profileCompleted"
                         (save)="onSubmit()"
                         (continue)="onSubmit()"
                         (back)="onRoute(EnrolmentRoutes.REGULATORY)"></app-page-footer>

      </form>

    </div>
  </div>

</app-busy-overlay>
