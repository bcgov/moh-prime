<app-busy-overlay [busy]="busy">

  <div class="row">
    <div class="col-sm-12 col-lg-8 offset-lg-1 offset-xl-0 app-print-layout">

      <app-progress-indicator *ngIf="showProgressBar"
                              [currentRoute]="EnrolmentRoutes.PHARMANET_ENROLMENT_CERTIFICATE"></app-progress-indicator>

      <app-page-header>PharmaNet Enrolment Certificate</app-page-header>

      <app-page-subheader>
        <ng-container appPageSubheaderTitle>PRIME Enrolment Details</ng-container>
        <ng-container appPageSubheaderSummary>
          This page contains your PharmaNet ID. You will need to provide this ID to any administrator or vendor who is
          setting up your PharmaNet access account. This ID will be recorded on all your PharmaNet transactions.
        </ng-container>
      </app-page-subheader>

      <app-enrollee-profile [enrollee]="enrollee"></app-enrollee-profile>

      <app-enrollee-address [address]="mailingAddress"></app-enrollee-address>

      <dl class="row mb-4">
        <dt class="col-6">PharmaNet ID</dt>
        <dd class="col-6 text-right">{{ enrolment.enrollee.licensePlate | default }}</dd>
      </dl>

      <app-enrollee-organizations [organizations]="organizations"></app-enrollee-organizations>

      <app-enrollee-privileges [privileges]="privileges"></app-enrollee-privileges>

      <ng-container *ngIf="enrolmentCertificateNote">
        <dl class="row mb-4">
          <dt class="col-6">Limits and Conditions</dt>
          <dd class="col-6 text-right">{{ enrolmentCertificateNote | default }}</dd>
        </dl>
      </ng-container>

      <app-page-subheader>
        <ng-container appPageSubheaderTitle>Provisioner Links</ng-container>
        <ng-container appPageSubheaderSummary>
          Generate provisioner links to facilitate your access into PharmaNet.
        </ng-container>
      </app-page-subheader>

      <div class="text-right mb-3">

        <button mat-flat-button
                color="primary"
                (click)="generateProvisionerLink()">
          <mat-icon class="add-icon">add</mat-icon>
          Generate Provisioner Link
        </button>

      </div>

      <div *ngIf="tokens?.length"
           class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Active</th>
              <th scope="col">Views</th>
              <th scope="col">&nbsp;</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let token of tokens">
              <td>{{ token.id }}</td>
              <td>{{ token.active | yesNo }}</td>
              <td>{{ token.viewCount }}</td>
              <td>
                <app-clipboard-icon [content]="getTokenUrl(token.id)"></app-clipboard-icon>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>

</app-busy-overlay>
