<div class="app-print-layout">

  <app-page [busy]="busy">

    <app-page-header>PharmaNet Enrolment Certificate</app-page-header>

    <app-progress-indicator *ngIf="showProgressBar"
                            [currentRoute]="EnrolmentRoutes.PHARMANET_ENROLMENT_CERTIFICATE"></app-progress-indicator>

    <app-page-subheader>
      <ng-container appPageSubheaderTitle>Next Steps</ng-container>
    </app-page-subheader>

    <p>
      Your PharmaNet ID is below. You will need to provide this ID to the person who will set up your local PharmaNet
      access account. For most community practices, this will be the vendor for your PharmaNet access software. Please
      do not send your PharmaNet ID in an email. Use the "Provisioner Link" utility below to send a link to your vendor
      that they can access.
    </p>

    <p class="mb-5">
      You can either copy and paste the provisioner link into an email to your vendor on your own, or use the list below
      and have PRIME send an email on your behalf.
    </p>

    <app-page-subheader>
      <ng-container appPageSubheaderTitle>Your PharmaNet ID</ng-container>
    </app-page-subheader>

    <p class="mb-4">Your PharmaNet ID is
      {{ expiryDate === null ? ' expired' : ' valid for one year. Please renew by ' + expiryDate }}.</p>

    <p class="font-weight-bold mb-5">
      {{ enrolment.enrollee.licensePlate | uppercase }}
    </p>

    <app-page-subheader>
      <ng-container appPageSubheaderTitle>Provisioner Links</ng-container>
    </app-page-subheader>

    <p class="mb-5">
      Click the Provisioner Link button to generate a link for your vendor to access your PharmaNet ID. (Copy and paste
      the Provisioner Link into an email and send.) You can generate a new link if you need to. Each link expires in one
      week, or after three views.
    </p>

    <div class="mb-5">
      <button mat-flat-button
              color="primary"
              (click)="generateProvisionerLink()">
        <mat-icon class="add-icon">add</mat-icon>
        Generate Provisioner Link
      </button>

      <div *ngIf="tokens?.length"
           class="table-responsive">
        <table class="table mt-4">
          <thead>
            <tr>
              <th scope="col">Active</th>
              <th scope="col">Views</th>
              <th scope="col">&nbsp;</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let token of tokens">
              <td>{{ token.active | yesNo }}</td>
              <td>{{ token.viewCount }}</td>
              <td>

                <app-clipboard-icon [content]="getTokenUrl(token.id)"></app-clipboard-icon>

              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="mb-5">
      <app-enrollee-organizations [organizations]="organizations"></app-enrollee-organizations>
    </div>

    <div class="mb-5">
      <app-enrollee-privileges [privileges]="privileges"></app-enrollee-privileges>
    </div>

    <ng-container *ngIf="enrolmentCertificateNote">
      <div class="mb-5">
        <app-enrollee-property title="Limits and Conditions"
                               [makeBold]="true">
          {{ enrolmentCertificateNote | default }}
        </app-enrollee-property>
      </div>
    </ng-container>

  </app-page>

</div>
