<div class="app-print-layout">

  <app-page [busy]="busy">

    <app-page-header>PharmaNet Enrolment Certificate</app-page-header>

    <app-progress-indicator *ngIf="showProgressBar"
                            [currentRoute]="EnrolmentRoutes.PHARMANET_ENROLMENT_CERTIFICATE"></app-progress-indicator>

    <app-page-subheader>
      <ng-container appPageSubheaderTitle>Next Steps</ng-container>
    </app-page-subheader>


    <p class="mb-0">
      This page contains your PharmaNet ID. You will need to provide this ID to the vendor used by your
      organization.
    </p>
    <p class="mb-5">
      Care Connect, Excelleris, iClinic Inc, MediNet, Plexia, or other.
    </p>

    <app-page-subheader>
      <ng-container appPageSubheaderTitle>Your PharmaNet ID</ng-container>
    </app-page-subheader>

    <p class="mb-4">Your PharmaNet ID is
      {{ expiryDate === null ? ' expired' : ' valid for one year. Please renew by ' + expiryDate }}.</p>

    <p class="font-weight-bold mb-5">
      {{ enrolment.enrollee.licensePlate | uppercase }}
    </p>

    <app-page-subheader>
      <ng-container appPageSubheaderTitle>Provisioner Links</ng-container>
    </app-page-subheader>

    <p>
      Clicking the button below will generate a unique, private URL which will display your name, PharmaNet access
      privileges, and a unique identifying number.
    </p>
    <p>
      Please share this URL with your organizationâ€™s system administrator for the purpose of provisioning your access to
      PharmaNet. For your protection, the URL will expire after a certain number of views.
    </p>
    <p class="mb-4">
      If you have any questions about the collection or use of your personal information, please call Health Insurance
      BC toll free at 1-800-39PRIME.
    </p>

    <div class="mb-5">
      <button mat-flat-button
              color="primary"
              (click)="generateProvisionerLink()">
        <mat-icon class="add-icon">add</mat-icon>
        Generate Provisioner Link
      </button>

      <div *ngIf="tokens?.length"
           class="table-responsive">
        <table class="table mt-4">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Active</th>
              <th scope="col">Views</th>
              <th scope="col">&nbsp;</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let token of tokens">
              <td>{{ token.id }}</td>
              <td>{{ token.active | yesNo }}</td>
              <td>{{ token.viewCount }}</td>
              <td>

                <app-clipboard-icon [content]="getTokenUrl(token.id)"></app-clipboard-icon>

              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="mb-5">
      <app-enrollee-organizations [organizations]="organizations"></app-enrollee-organizations>
    </div>

    <div class="mb-5">
      <app-enrollee-privileges [privileges]="privileges"></app-enrollee-privileges>
    </div>

    <ng-container *ngIf="enrolmentCertificateNote">
      <div class="mb-5">
        <app-enrollee-property title="Limits and Conditions"
                               [makeBold]="true">
          {{ enrolmentCertificateNote | default }}
        </app-enrollee-property>
      </div>
    </ng-container>

  </app-page>

</div>
