<div class="app-print-layout">

  <app-enrollee-page [busy]="busy">

    <app-page-header>Next Steps to get PharmaNet</app-page-header>

    <app-enrolment-progress-indicator *ngIf="showProgressBar"></app-enrolment-progress-indicator>

    <app-next-steps-infographic [enrolment]="enrolment">

      <p class="mb-4">
        Get your access to PharmaNet set up. Use the email option below to notify your PharmaNet administrator of your
        completed enrolment.
      </p>

      <form [formGroup]="form">

        <ng-container *ngFor="let careSetting of careSettings">

          <ng-container [ngSwitch]="careSetting.careSettingCode">

            <app-page-subheader *ngSwitchCase="CareSettingEnum.PRIVATE_COMMUNITY_HEALTH_PRACTICE"
                                headerType="h6">
              <ng-container appPageSubheaderTitle>
                Private Community Health Practice
              </ng-container>
              <ng-container appPageSubheaderSummary>
                Send your approval to your private community health practice's PharmaNet administrator (e.g., office
                manager).
              </ng-container>
            </app-page-subheader>

            <app-page-subheader *ngSwitchCase="CareSettingEnum.COMMUNITY_PHARMACIST"
                                headerType="h6">
              <ng-container appPageSubheaderTitle>
                Community Pharmacy
              </ng-container>
              <ng-container appPageSubheaderSummary>
                Send your approval to your pharmacy's PharmaNet administrator (e.g., pharmacy manager).
              </ng-container>
            </app-page-subheader>

            <app-page-subheader *ngSwitchCase="CareSettingEnum.HEALTH_AUTHORITY"
                                headerType="h6">
              <ng-container appPageSubheaderTitle>
                Health Authority
              </ng-container>
              <ng-container appPageSubheaderSummary>
                Send your approval to your health authority's PharmaNet access administrator (ask your manager if you
                are
                unsure who this is).
              </ng-container>
            </app-page-subheader>

          </ng-container>

          <div class="row"
               [hidden]="isEmailHidden(careSetting.careSettingCode)">
            <div class="col-sm-8 col-xl-7">

              <mat-form-field class="w-100 mb-3">
                <input matInput
                       placeholder="Email"
                       formControlName="recipients">
                <mat-error *ngIf="recipients.hasError('required')">Required</mat-error>
                <mat-error *ngIf="recipients.hasError('email')">Must be a valid email address</mat-error>
              </mat-form-field>

            </div>
            <div class="col-sm-4 col-xl-3">

              <button mat-flat-button
                      type="button"
                      color="primary"
                      class="w-100 mb-4"
                      (click)="sendProvisionerAccessLinkTo(careSetting.careSettingCode)">
                Send
              </button>

            </div>
          </div>

        </ng-container>
      </form>

      <ng-template #concise
                   let-provisioner="provisioner">
        <p class="mb-4">
          Your PharmaNet approval notification will be sent to {{ provisioner }}.
        </p>
      </ng-template>

      <ng-template #verbose
                   let-provisioner="provisioner">
        <p class="mb-4">
          Provide the email address of the person in your organization who is responsible for contacting
          {{ provisioner }} to set up accounts (e.g., your Office Manager or MOA). Use a comma to separate multiple
          emails addresses. Do not enter your own email as you will be copied on the communication.
        </p>
      </ng-template>

    </app-next-steps-infographic>

  </app-enrollee-page>

</div>
