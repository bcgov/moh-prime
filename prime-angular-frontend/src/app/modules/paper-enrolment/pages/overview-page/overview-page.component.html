<app-page [busy]="busy">

  <app-page-header>PRIME Profile</app-page-header>

  <app-paper-enrolment-progress-indicator [inProgress]="false"></app-paper-enrolment-progress-indicator>

  <div class="mb-5">
    <app-page-subheader>
      <ng-container appPageSubheaderTitle>Enrolment Review</ng-container>
      <ng-container appPageSubheaderSummary>
        Review this information before submitting.
      </ng-container>
    </app-page-subheader>
  </div>

  <app-demographic-overview [demographic]="enrollee">
  </app-demographic-overview>

  <app-care-setting-overview [careSettings]="enrollee">
  </app-care-setting-overview>

  <app-regulatory-overview [regulatory]="enrollee"></app-regulatory-overview>

  <app-obo-sites-overview [oboSiteForm]="enrollee"></app-obo-sites-overview>

  <app-enrollee-self-declarations *ngIf="enrollee?.selfDeclarations"
                                  [enrolment]="enrollee"
                                  [showAllSelfDeclarationsQuestions]="true">
    <button *ngIf="true"
            mat-icon-button
            matTooltip="Edit Self-declaration"
            (click)="onRoute(PaperEnrolmentRoutes.SELF_DECLARATION)">
      <mat-icon>edit</mat-icon>
    </button>
  </app-enrollee-self-declarations>

  <app-page-section>
    <app-page-subheader>
      <ng-container appPageSubheaderTitle>Job Site Information</ng-container>

      <button *ngIf="true"
              mat-icon-button
              matTooltip="Edit Upload Information"
              (click)="onRoute(PaperEnrolmentRoutes.UPLOAD)">
        <mat-icon>edit</mat-icon>
      </button>
    </app-page-subheader>
    <app-enrollee-property title="TOA Type">
      {{ AgreementTypeNameMap[enrollee?.assignedTOAType] }}
    </app-enrollee-property>

    <ng-container *ngIf="savedDocuments?.length">

      <app-enrollee-property title="Filename">
        <div *ngFor="let document of savedDocuments"
             class="mb-2">
          <button mat-stroked-button
                  color="primary"
                  (click)="getDocument(document.id)">
            <mat-icon class="upload mr-2">attachment</mat-icon>
            {{ document.filename | default }}
          </button>
        </div>
      </app-enrollee-property>

    </ng-container>
  </app-page-section>

  <app-page-footer [isInitialEnrolment]="true"
                   primaryActionLabel="Submit Enrolment"
                   (save)="onSubmit()"
                   (back)="onBack()"></app-page-footer>

</app-page>
